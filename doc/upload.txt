Базовые метрики
requests_hit_count - общее количество запросов
requests_start_count - количество вызовов целевого метода
requests_finish_success_count - количество нормальных окончаний работы скрипта
requests_finish_exception_count - количество окончаний работы скрипта по эксепшену
system_cpu_usage - процент загруки процессора
system_load_average - среднее значение загруженности системы
system_memory_usage - рамер используемой памяти
system_memory_max - максимальный размер памяти
logging_max_memory - максимальный расход памяти при формирования лога
logging_execution_time - время формирования лога
logging_tags_count - общее количество тегов

Метрики для нормальных окончаний работы скрипта
success_max_memory - максимальный расход памяти
success_execution_time - время исполнения скрипта
success_db_requests - количество запросов к БД
success_db_requests_time - общее время исполнения запросов БД
success_db_requests_time_max - максимальное время исполнения среди запросов БД
success_api_requests - количество запросов к внешним API
success_api_requests_time - общее время ожидания внешних API
success_api_requests_time_max - максимальное время ожидания внешних API

Метрики для окончаний работы скрипта по эксепшену (ошибка)
exception_max_memory - максимальный расход памяти
exception_execution_time - время исполнения скрипта
exception_db_requests - количество запросов к БД
exception_db_requests_time - общее время исполнения запросов БД
exception_db_requests_time_max - максимальное время исполнения среди запросов БД
exception_api_requests - количество запросов к внешним API
exception_api_requests_time - общее время ожидания внешних API
exception_api_requests_time_max - максимальное время ожидания внешних API

Кастомные метрики
test_custom_metric - тестовая custom метрика


Аналитическая система стучиться по API к объекту логирования с запросом на список доступных архивов часов с запросом типа:
https://idemo.samo.ru/b2b/stable/.dev/php/getmetrics.php?token=7f108a1eea2d3688a958653bfef306f8b50f7cdb
(доступно по VPN из офиса)
ответ содержит список часов, архивы которых доступны подобно этому:
["2025-09-02T12","2025-09-03T09","2025-09-03T10","2025-09-03T13",...]

далее Аналитическая система получает свежие архивы запросом типа
https://idemo.samo.ru/b2b/stable/.dev/php/getmetrics.php?token=7f108a1eea2d3688a958653bfef306f8b50f7cdb&file=2025-09-02T12
В ответе приходит архив 2025-09-02T12.zip , содержащий файлы минут, которые имеют названия типа 2025-09-15T12:00
по содержанию это обычный CSV файл с разделителем запятые, имеющий структуру:
метрика, тег, значение, где:
метрика - алиас метрики из списка выше,
тег - обычно это машрут типа messages::getcountmessages , где уровни разделены двойными двоеточиями, но это может быть что угодно
значение - числовое значение метрики до 3х знаков после запятой.
В файле присутствуют только зарегистрированные метрики, в нашем случае с сайтом - это стандартный набор метрик, различающийся тегами роутов.


Если подобную схему реализовать сложно, то можно будет забрать данные непосредственно из таблицы базы или с использованием процедуры.